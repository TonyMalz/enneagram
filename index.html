<!DOCTYPE html>
<html>
<head>
	<title>Enneagram Test</title>
	<style type="text/css">

		.main {
			display: table;
  			margin-right: auto;
  			margin-left: auto;
		}
		table {
			border-collapse: collapse;
			empty-cells: hide;

		}

		table, td {
			border-bottom: 1px solid #ddd;
			border-top: 1px solid #ddd;

		}

		.tr:hover {background-color: #f5f5f5}

		td {
			text-align: center;
			padding: 1.2em;
		}

	</style>
</head>
<body>
<div class="main">
	<table id="t1">
	</table>
	<table id="2">
	</table>
	<table id="3">
	</table>
</div>

<script type="text/javascript">
	var items = [
	[{text:'offensiv', type:'m'}, {text:'zurückhaltend',type:'i'}],
	[{text:'engagiert', type:'ms'},{text:'abwartend',type:'i'}],
	[{text:'unfreundlich/distanziert', type:'i'},{text:'freundlich',type:'s'}],

	[{text:'mitteilsam/redselig', type:'s'}, {text:'verschlossen',type:'i'}],
	[{text:'offen (intellektuell, emotional)', type:'msi'},{text:'skeptisch',type:'i'}],
	[{text:'ruhig/besonnen', type:'i'},{text:'quirlig/spontan',type:'s'}],

	[{text:'assoziativ', type:'s'}, {text:'systematisch',type:'i'}],
	[{text:'wortkarg', type:'i'},{text:'redegewandt',type:'ms'}],
	[{text:'konzentriert', type:'i'},{text:'leicht ablenkbar',type:'s'}],

	[{text:'ängstlich', type:'s'}, {text:'aggresiv',type:'m'}],
	[{text:'nutzenorientiert (pragmatisch)', type:'m'},{text:'problemorientiert',type:'i'}],
	[{text:'umfassend informiert', type:'si'},{text:'tendenziös informiert',type:'m'}],

	[{text:'sympathisch wirkend', type:'s'}, {text:'unsympathisch wirkend',type:'m'}],
	[{text:'arrogant', type:'m'},{text:'bescheiden',type:'i'}],
	[{text:'fordernd', type:'m'},{text:'zurückhaltend',type:'i'}],

	[{text:'spontan', type:'ms'}, {text:'abwägend',type:'i'}],
	[{text:'abwägend urteilend', type:'i'},{text:'spontan urteilend',type:'ms'}],
	[{text:'pragmatisch orientiert', type:'ms'},{text:'prinzipiell orientiert',type:'i'}],

	[{text:'durchsetzend', type:'mi'}, {text:'vermittelnd',type:'si'}],
	[{text:'rendend', type:'s'},{text:'zuhörend',type:'si'}],
	[{text:'belehrend', type:'m'},{text:'beratend',type:'i'}],

	[{text:'interessiert', type:'msi'}, {text:'gleichgültig',type:'mi'}],
	[{text:'flexibel', type:'s'},{text:'beharrend/starr',type:'m'}],
	[{text:'zielstrebig', type:'mi'},{text:'abschweifend',type:'s'}],

	[{text:'personenorientiert', type:'ms'}, {text:'sachorientiert',type:'i'}],
	[{text:'integrierend', type:'s'},{text:'polarisierend',type:'m'}],
	[{text:'beherrschend', type:'m'},{text:'sich einfügend',type:'s'}],

	[{text:'optimistisch', type:'ms'}, {text:'pessimistisch',type:'i'}],
	[{text:'nachsichtig', type:'s'},{text:'fordernd',type:'m'}],
	[{text:'zögernd', type:'i'},{text:'entschlossen',type:'m'}],
	];

	var table = document.getElementById('t1');
	var ridx = 0;
	for (var i = 0; i < items.length; i++) {
		var itemrow = items[i];

		if ( i % 3 == 0 && i > 0) {
			// empty row after every 3rd item
			var row = table.insertRow(ridx++);
			var cell1 = row.insertCell(0);
			var cell3 = row.insertCell(1);
			var cell2 = row.insertCell(2);
		}

		var row = table.insertRow(ridx++);
		var cell1 = row.insertCell(0);
		var cell3 = row.insertCell(1);
		var cell2 = row.insertCell(2);
		
		cell1.innerHTML = itemrow[0].text;
		cell2.innerHTML = itemrow[1].text;
		for (var j = -3; j < 0; j++) {
			cell3.innerHTML += '<input type=radio name='+i+' value='+j+' onclick="checkItem(this)">';
		}
		cell3.innerHTML+= '<span class="divider">';
		for (var j = 1; j < 4; j++) {
			cell3.innerHTML += '<input type=radio name='+i+' value='+j+' onclick="checkItem(this)">';
		}
		
	};

	var glValues = {m:0,s:0,i:0};
	var glAnswers= {tab1:[], tab2:[], tab3:[], tab4:[]};

	function checkItem(item){
		console.log(item.checked);
		var itemID = item.name;
		var answerItem = items[itemID][(item.value<0)?0:1];
		glAnswers.tab1[itemID] = [answerItem,item.value];
		console.log(glAnswers);
		calcResults();
	}

	function calcResults() {
		glValues = {m:0,s:0,i:0};
		for (var i = glAnswers.tab1.length - 1; i >= 0; i--) {
			if (glAnswers.tab1[i] === undefined){
				continue;
			}
			var item = glAnswers.tab1[i];
			var typeString = item[0].type;
			var value = item[1];
			for (var j = typeString.length - 1; j >= 0; j--) {
				if (typeString[j] == 'i')
					glValues.i += Math.abs(value);
				if (typeString[j] == 'm')
					glValues.m += Math.abs(value);
				if (typeString[j] == 's')
					glValues.s += Math.abs(value);
			}
		};
		console.log(glValues);
		
	}
	

	
</script>

</body>
</html>
